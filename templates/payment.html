<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continue to Payment - GoGo Self Drive Cars</title>
    <link rel="icon" type="image/png" href="/static/img/logo.png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    {% include '_header_css.html' %}
    {% include '_footer_css.html' %}
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.2.0/css/all.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html,
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: #fcfcfd;
            color: #1e293b;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(circle at 0% 0%, rgba(43, 57, 144, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 100% 100%, rgba(255, 107, 53, 0.05) 0%, transparent 50%),
                #fcfcfd;
            z-index: -2;
        }

        .wavy-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='1440' height='800' viewBox='0 0 1440 800' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M-100 600C200 500 400 700 700 600C1000 500 1200 700 1540 600' stroke='white' stroke-opacity='0.1' stroke-width='1'/%3E%3Cpath d='M-100 550C200 450 400 650 700 550C1000 450 1200 650 1540 550' stroke='white' stroke-opacity='0.1' stroke-width='1'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.3;
            z-index: -1;
            pointer-events: none;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }

        /* Header - glassmorphism */
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.02);
            }
        }

        /* Progress Steps */
        .progress-steps {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0;
            margin-bottom: 40px;
            padding: 0 20px;
            animation: fadeIn 0.8s ease-out;
        }

        .progress-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            font-size: 13px;
            font-weight: 600;
            color: #94a3b8;
            position: relative;
            z-index: 1;
        }

        .progress-step.completed {
            color: #2b3990;
        }

        .progress-step.active {
            color: #2b3990;
        }

        .step-number {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
            border: 2px solid #e2e8f0;
            background: #ffffff;
            color: #94a3b8;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        .progress-step.completed .step-number {
            background: #2b3990;
            border-color: #2b3990;
            color: #fff;
            box-shadow: 0 0 15px rgba(43, 57, 144, 0.3);
        }

        .progress-step.active .step-number {
            background: #2b3990;
            border-color: #2b3990;
            color: #fff;
            box-shadow: 0 0 20px rgba(43, 57, 144, 0.2);
            transform: scale(1.1);
        }

        .step-connector {
            width: 100px;
            height: 2px;
            background: #e2e8f0;
            margin: -25px 10px 0;
            position: relative;
            top: 18px;
        }

        .step-connector.completed {
            background: #2b3990;
        }

        /* Two-Column Layout */
        .payment-layout {
            max-width: 1440px;
            margin: 110px auto 40px;
            padding: 0 40px;
            display: grid;
            grid-template-columns: 1fr 440px;
            gap: 50px;
            align-items: start;
        }

        .payment-left {
            background: #ffffff;
            border-radius: 32px;
            padding: 50px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.05);
            color: #1a202c;
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) both;
            border: 1px solid #edf2f7;
        }

        .payment-right {
            position: sticky;
            top: 120px;
            animation: fadeInUp 1s cubic-bezier(0.16, 1, 0.3, 1) 0.2s both;
        }

        /* Page Title */
        .page-title {
            font-size: 40px;
            font-weight: 950;
            margin-bottom: 40px;
            text-align: left;
            color: #061a40;
            letter-spacing: -1.5px;
            line-height: 1.1;
        }

        /* Section Styles */
        .section-title {
            font-size: 22px;
            font-weight: 850;
            color: #2b3990;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .section-title .section-icon {
            width: 28px;
            height: 28px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
        }

        .section-description {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 16px;
            line-height: 1.6;
        }

        .section-divider {
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid #edf2f7;
        }

        .section-divider:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        /* Car Details */
        .car-details-section {
            display: flex;
            gap: 20px;
        }

        .car-image-container {
            flex-shrink: 0;
            width: 140px;
            height: 95px;
            border-radius: 14px;
            overflow: hidden;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        .car-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            padding: 8px;
        }

        .car-info {
            flex: 1;
        }

        .car-model {
            font-size: 22px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .car-specs {
            display: flex;
            gap: 10px;
            font-size: 13px;
            color: #64748b;
            flex-wrap: wrap;
        }

        .car-spec {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #f8fafc;
            padding: 5px 12px;
            border-radius: 20px;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .car-spec:hover {
            border-color: #2b3990;
            background: #eff6ff;
        }

        .spec-icon {
            width: 14px;
            height: 14px;
            color: #2b3990;
        }

        /* Booking Details */
        .booking-details-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-top: 12px;
        }

        .booking-detail-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .booking-detail-label {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }

        .booking-detail-value {
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
        }

        /* Deposit Cards */
        .deposit-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 12px;
        }

        .deposit-option-card {
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            display: block;
            text-align: center;
        }

        .deposit-option-card:hover {
            border-color: #93c5fd;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        .deposit-option-card.selected {
            border-color: #2b3990 !important;
            background: #f0f9ff !important;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
        }

        .deposit-option-card input[type="radio"] {
            display: none;
        }

        .deposit-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }

        .deposit-name {
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 3px;
            font-size: 14px;
        }

        .deposit-desc {
            font-size: 12px;
            color: #64748b;
        }

        /* Damage Protection */
        .protection-grid {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin-top: 12px;
        }

        .damage-protection-btn {
            flex: 1;
            min-width: 130px;
            padding: 18px 14px;
            background: #fff;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .damage-protection-btn:hover {
            border-color: #93c5fd;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);
        }

        .damage-protection-btn.selected {
            border-color: #2b3990 !important;
            background: rgba(43, 57, 144, 0.05) !important;
            box-shadow: 0 8px 20px rgba(43, 57, 144, 0.1);
        }

        .protection-price {
            font-size: 22px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 6px;
        }

        .protection-desc {
            font-size: 12px;
            color: #64748b;
            line-height: 1.4;
        }

        .protection-badge {
            position: absolute;
            top: -1px;
            right: -1px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: #fff;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 10px;
            border-radius: 0 10px 0 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Coupon Section */
        .coupon-input-group {
            display: flex;
            gap: 10px;
            align-items: stretch;
        }

        .coupon-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        .coupon-input:focus {
            border-color: #2b3990;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .coupon-apply-btn {
            padding: 12px 24px;
            background: #2b3990;
            color: #fff;
            border: none;
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .coupon-apply-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(43, 57, 144, 0.3);
        }

        .coupon-apply-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .coupon-message {
            margin-top: 8px;
            font-size: 13px;
            display: none;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 8px;
        }

        /* Coupon Applied Style */
        .coupon-applied {
            margin-top: 15px;
            padding: 15px 20px;
            background: #f0fdf4;
            border-radius: 14px;
            display: none;
            border: 1px solid #bbf7d0;
        }

        .coupon-applied-inner {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .coupon-remove-btn {
            background: none;
            border: none;
            color: #dc2626;
            cursor: pointer;
            font-weight: 600;
            font-size: 13px;
            font-family: inherit;
        }

        .coupon-remove-btn:hover {
            text-decoration: underline;
        }

        /* Fare Summary Card (Right Column) */
        .fare-card {
            background: #ffffff;
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 30px 100px rgba(6, 26, 64, 0.08);
            color: #1e293b;
            border: 1px solid #edf2f7;
            position: relative;
            overflow: hidden;
        }

        .fare-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: #2b3990;
        }

        .fare-card-title {
            font-size: 24px;
            font-weight: 900;
            color: #061a40;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #edf2f7;
            display: flex;
            align-items: center;
            gap: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pricing-items {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .pricing-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            font-size: 15px;
            color: #64748b;
        }

        .pricing-item-name {
            font-weight: 500;
        }

        .pricing-item-amount {
            font-weight: 600;
            color: #1e293b;
        }

        .pricing-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 25px 0 0;
            margin-top: 20px;
            border-top: 2px dashed #edf2f7;
        }

        .pricing-total-label {
            font-size: 16px;
            font-weight: 850;
            color: #1e293b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .pricing-total-amount {
            font-size: 36px;
            font-weight: 950;
            color: #2b3990;
            letter-spacing: -1px;
        }

        .kyc-warning {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-left: 4px solid #f59e0b;
            border-radius: 0 10px 10px 0;
            padding: 14px 18px;
            margin-bottom: 20px;
        }

        .pay-button {
            width: 100%;
            border-radius: 50px;
            height: 64px;
            font-size: 20px;
            font-weight: 950;
            background: #061a40;
            box-shadow: 0 10px 30px rgba(6, 26, 64, 0.3);
            border: none;
            color: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .pay-button:hover:not(:disabled) {
            transform: translateY(-2px);
            background: #2b3990;
            box-shadow: 0 15px 40px rgba(59, 130, 246, 0.4);
        }

        .pay-button:disabled {
            background: #e2e8f0;
            color: #94a3b8;
            border: none;
            cursor: not-allowed;
            box-shadow: none;
            opacity: 1;
        }

        .kyc-warning-text {
            font-size: 14px;
            color: #92400e;
            line-height: 1.5;
        }

        .kyc-documents {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }

        .kyc-document-item {
            background: #f8fafc;
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .kyc-document-item:hover {
            border-color: #2b3990;
            background: #f0f7ff;
        }

        .kyc-document-label {
            display: block;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
            font-size: 13px;
        }

        .kyc-preview {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .kyc-preview img {
            width: 80px;
            height: 55px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
        }

        .kyc-upload-status {
            font-size: 12px;
            font-weight: 600;
            padding: 3px 10px;
            border-radius: 20px;
        }

        .kyc-upload-status.uploaded {
            background: #d1fae5;
            color: #065f46;
        }

        .kyc-upload-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .kyc-upload-input {
            display: none;
        }

        .kyc-upload-button {
            display: inline-block;
            padding: 8px 20px;
            background: linear-gradient(135deg, #2b3990, #2b3990);
            color: #fff;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .kyc-upload-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(43, 57, 144, 0.3);
        }

        /* Terms Section */
        .terms-section {
            margin-top: 5px;
        }

        .terms-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .terms-header:hover {
            border-color: #2b3990;
            background: #f0f9ff;
        }

        .terms-header h3 {
            font-size: 15px;
            font-weight: 600;
            color: #1e293b;
            margin: 0;
        }

        .terms-toggle {
            font-size: 14px;
            color: #64748b;
            transition: transform 0.3s ease;
            display: inline-block;
        }

        .terms-toggle.expanded {
            transform: rotate(180deg);
        }

        .terms-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            border-radius: 0 0 12px 12px;
        }

        .terms-content.expanded {
            max-height: 3000px;
        }

        .terms-body {
            padding: 25px;
            background: #fff;
            border: 2px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 12px 12px;
            font-size: 14px;
            color: #475569;
            line-height: 1.7;
        }

        .terms-body h1 {
            font-size: 20px;
            font-weight: 700;
            color: #1a202c;
            margin-bottom: 8px;
        }

        .terms-body h2 {
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
            margin: 20px 0 8px;
        }

        .terms-body h3 {
            font-size: 14px;
            font-weight: 700;
            color: #1e293b;
            margin: 15px 0 8px;
        }

        .terms-body p {
            margin-bottom: 10px;
        }

        .terms-body ul {
            padding-left: 20px;
            margin-bottom: 10px;
        }

        .terms-body li {
            margin-bottom: 5px;
        }

        .terms-body table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0 15px;
            font-size: 13px;
        }

        .terms-body th,
        .terms-body td {
            padding: 8px 12px;
            border: 1px solid #e2e8f0;
            text-align: left;
        }

        .terms-body th {
            background: #f8fafc;
            font-weight: 700;
            color: #1e293b;
        }

        .terms-checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin-top: 16px;
            padding: 16px;
            background: #f0f7ff;
            border: 2px solid #bfdbfe;
            border-radius: 12px;
        }

        .terms-checkbox-container input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            accent-color: #2b3990;
            cursor: pointer;
            flex-shrink: 0;
        }

        .terms-checkbox-container label {
            font-size: 13px;
            color: #1e293b;
            line-height: 1.5;
            cursor: pointer;
            font-weight: 500;
        }

        /* Phone Section */
        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.3s ease;
            outline: none;
        }

        .form-control:focus {
            border-color: #2b3990;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Payment Button Section */
        .payment-section {
            background: linear-gradient(135deg, #1e3a8a, #2b3990);
            border-radius: 16px;
            padding: 24px 28px;
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
        }

        .payment-info {
            flex: 1;
        }

        .payment-label {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .payment-description {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 4px;
        }



        /* Footer */
        .main-footer {
            background: #fff;
            color: #1e293b;
            padding: 80px 0 30px;
            border-top: 1px solid #e2e8f0;
            margin-top: 80px;
        }

        .footer-container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 0 40px;
            display: grid;
            grid-template-columns: 1.5fr 1fr 1fr 1.2fr;
            gap: 40px;
        }

        .footer-col-title {
            font-size: 18px;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 25px;
            position: relative;
            display: inline-block;
        }

        .footer-col-title::after {
            content: '';
            position: absolute;
            left: 0;
            bottom: -8px;
            width: 30px;
            height: 2px;
            background: #2b3990;
            border-radius: 2px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }

        .logo-img-footer {
            width: 200px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-img-footer img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .footer-desc {
            font-size: 15px;
            color: #475569;
            line-height: 1.7;
            margin-bottom: 25px;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 12px;
        }

        .footer-links a {
            color: #475569;
            text-decoration: none;
            font-size: 15px;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .footer-links a:hover {
            color: #2b3990;
            transform: translateX(5px);
        }

        .footer-links a::before {
            content: '\203A';
            color: #2b3990;
            font-weight: bold;
            font-size: 18px;
        }

        .contact-info {
            list-style: none;
        }

        .contact-info li {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 20px;
            color: #475569;
            font-size: 15px;
            line-height: 1.6;
        }

        .contact-icon {
            width: 20px;
            height: 20px;
            color: #2b3990;
            flex-shrink: 0;
            margin-top: 3px;
        }

        .footer-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .footer-gallery img {
            width: 100%;
            height: 70px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid #e2e8f0;
            transition: transform 0.3s ease;
        }

        .footer-gallery img:hover {
            transform: scale(1.05);
            border-color: #2b3990;
        }

        .social-icons-wrapper {
            margin-top: 20px;
        }

        .social-icons {
            display: flex;
            gap: 15px;
        }

        .social-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: #f1f5f9;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .social-icon img {
            width: 18px;
            height: 18px;
            z-index: 1;
        }

        .social-icon::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #2b3990;
            transform: scale(0);
            transition: transform 0.3s ease;
            border-radius: 50%;
        }

        .social-icon:hover::before {
            transform: scale(1);
        }

        .social-icon:hover img {
            filter: brightness(0) invert(1);
        }

        .footer-bottom {
            max-width: 1300px;
            margin: 40px auto 0;
            border-top: 1px solid #cbd5e1;
            padding-top: 25px;
            text-align: center;
            color: #64748b;
            font-size: 14px;
        }

        /* ============================================================
           TABLET  (≤ 991px)
           ============================================================ */
        @media (max-width: 991px) {
            .payment-layout {
                grid-template-columns: 1fr;
                padding: 0 20px;
                margin-top: 90px;
                gap: 24px;
            }

            .payment-right {
                position: static;
            }

            .fare-card {
                margin-top: 0;
            }

            .car-details-section {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }

            .car-specs {
                justify-content: center;
            }

            .booking-details-grid {
                grid-template-columns: 1fr;
            }

            .deposit-grid {
                grid-template-columns: 1fr 1fr;
            }

            .protection-grid {
                flex-direction: row;
                flex-wrap: wrap;
            }

            .damage-protection-btn {
                min-width: unset;
                flex: 1 1 calc(33% - 8px);
            }

            .kyc-documents {
                grid-template-columns: 1fr 1fr;
            }

            .payment-section {
                flex-direction: column;
                text-align: center;
            }

            .pay-button {
                width: 100%;
            }

            .progress-steps {
                gap: 0;
            }

            .step-connector {
                width: 40px;
            }

            .progress-step span:not(.step-number) {
                display: none;
            }
        }

        /* ============================================================
           MOBILE  (≤ 768px)
           ============================================================ */
        @media (max-width: 768px) {

            /* Layout */
            .payment-layout {
                padding: 0 12px;
                margin-top: 76px;
                gap: 16px;
            }

            /* Left card */
            .payment-left {
                padding: 20px 16px;
                border-radius: 20px;
            }

            /* Page title */
            .page-title {
                font-size: 26px;
                letter-spacing: -0.5px;
                margin-bottom: 24px;
            }

            /* Section title */
            .section-title {
                font-size: 16px;
                gap: 10px;
            }

            /* Booking hero card (inline-styled) */
            .booking-hero-card {
                padding: 16px !important;
            }

            .booking-hero-card>div {
                flex-direction: column !important;
                gap: 16px !important;
                align-items: flex-start !important;
            }

            .booking-hero-card>div>div:first-child {
                width: 100% !important;
                height: 160px !important;
            }

            .booking-hero-card h2 {
                font-size: 20px !important;
            }

            .booking-hero-card>div>div:last-child>div[style*="display: flex; gap: 15px"] {
                flex-wrap: wrap !important;
                gap: 8px !important;
            }

            .booking-hero-card>div>div:last-child>div[style*="display: flex; gap: 40px"] {
                gap: 20px !important;
            }

            /* Deposit grid */
            .deposit-grid {
                grid-template-columns: 1fr;
            }

            /* Protection grid */
            .protection-grid {
                flex-direction: column;
            }

            .damage-protection-btn {
                flex: unset;
                min-width: unset;
                width: 100%;
            }

            /* KYC documents */
            .kyc-documents {
                grid-template-columns: 1fr;
            }

            /* Fare card */
            .fare-card {
                padding: 20px 16px;
                border-radius: 20px;
            }

            .fare-card-title {
                font-size: 18px;
                margin-bottom: 20px;
                padding-bottom: 16px;
                gap: 10px;
            }

            .pricing-total-amount {
                font-size: 26px;
            }

            /* Payment section */
            .payment-section {
                padding: 18px 16px;
                gap: 14px;
            }

            /* Pay button */
            .pay-button {
                height: 54px;
                font-size: 16px;
            }

            /* Coupon */
            .coupon-input-group {
                flex-direction: column;
                gap: 8px;
            }

            .coupon-apply-btn {
                width: 100%;
                padding: 12px;
            }

            /* Terms body */
            .terms-body {
                padding: 16px;
                font-size: 13px;
            }

            /* Booking details stats row */
            .booking-details-grid {
                grid-template-columns: 1fr 1fr;
            }

            /* Progress steps */
            .progress-steps {
                margin-bottom: 20px;
            }

            .step-connector {
                width: 24px;
            }

            /* Footer */
            .footer-container {
                grid-template-columns: 1fr;
                padding: 0 16px;
                gap: 24px;
            }
        }

        /* ============================================================
           SMALL MOBILE  (≤ 480px)
           ============================================================ */
        @media (max-width: 480px) {
            .payment-layout {
                padding: 0 8px;
                margin-top: 70px;
            }

            .payment-left {
                padding: 16px 12px;
            }

            .page-title {
                font-size: 22px;
            }

            .deposit-grid {
                grid-template-columns: 1fr;
            }

            .booking-details-grid {
                grid-template-columns: 1fr;
            }

            header {
                padding: 12px 16px;
            }

            .logo-img {
                width: 150px;
                height: 45px;
            }

            .pricing-total-amount {
                font-size: 22px;
            }

            .pay-button {
                height: 50px;
                font-size: 15px;
            }

            .fare-card {
                padding: 16px 12px;
            }
        }
    </style>
</head>

<body data-car-id="{{ car.id if car else 'null' }}" data-hours="{{ hours if hours else 1 }}"
    data-kyc-complete="{{ 'true' if kyc_complete else 'false' }}"
    data-missing-docs='{{ missing_documents | tojson if missing_documents else "[]" }}'>
    <div class="wavy-pattern"></div>
    <!-- New Header Design matching index.html -->
    {% include '_header.html' %}

    <!-- Progress Steps -->
    <div style="max-width: 1100px; margin: 110px auto 20px; padding: 0 20px;">
        <div class="progress-steps">
            <div class="progress-step completed"><span class="step-number">&#10003;</span><span>Select Car</span></div>
            <div class="step-connector completed"></div>
            <div class="progress-step completed"><span class="step-number">&#10003;</span><span>Choose Dates</span>
            </div>
            <div class="step-connector completed"></div>
            <div class="progress-step active"><span class="step-number">3</span><span>Payment</span></div>
        </div>
    </div>

    <div class="payment-layout">
        <div class="payment-left">
            <h1 class="page-title">Complete Your Booking</h1>

            <!-- Booking Hero Section -->
            <div class="booking-hero-card"
                style="background: #ffffff; border-radius: 24px; padding: 30px; margin-bottom: 30px; border: 2px solid #2b3990; box-shadow: 0 10px 30px rgba(6, 26, 64, 0.05);">
                <div style="display: flex; gap: 30px; align-items: center;">
                    <div
                        style="width: 200px; height: 130px; background: #f8fafc; border-radius: 16px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 25px rgba(0,0,0,0.05); flex-shrink: 0;">
                        <img src="{{ car_image if car_image else '/static/img/landing.png' }}" alt="{{ car.brand }}"
                            style="width: 90%; height: auto; object-fit: contain;">
                    </div>
                    <div>
                        <h2 style="font-size: 28px; font-weight: 950; color: #061a40; margin-bottom: 10px;">{{ car.brand
                            }} {{ car.car_model }}</h2>
                        <div style="display: flex; gap: 15px; margin-bottom: 15px;">
                            <span
                                style="background: rgba(43, 57, 144, 0.1); padding: 5px 14px; border-radius: 100px; font-size: 13px; font-weight: 700; color: #2b3990;"><i
                                    class="fas fa-users" style="margin-right: 6px;"></i>{{
                                car.no_of_seats.value.replace('FIVE', '5').replace('SEVEN', '7') }} Seater</span>
                            <span
                                style="background: rgba(43, 57, 144, 0.1); padding: 5px 14px; border-radius: 100px; font-size: 13px; font-weight: 700; color: #2b3990;"><i
                                    class="fas fa-cog" style="margin-right: 6px;"></i>{{
                                car.transmission_type.value.title() }}</span>
                            <span
                                style="background: rgba(43, 57, 144, 0.1); padding: 5px 14px; border-radius: 100px; font-size: 13px; font-weight: 700; color: #2b3990;"><i
                                    class="fas fa-gas-pump" style="margin-right: 6px;"></i>{{
                                car.fuel_type.value.title() }}</span>
                        </div>
                        <div style="display: flex; gap: 40px;">
                            <div>
                                <div
                                    style="font-size: 11px; font-weight: 800; color: #2b3990; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.6;">
                                    Duration</div>
                                <div style="font-size: 18px; font-weight: 800; color: #061a40;">{{ hours // 24 if hours
                                    >= 24 else hours }} {{ 'Days' if hours >= 24 else 'Hours' }}</div>
                            </div>
                            <div style="height: 40px; width: 2px; background: rgba(43, 57, 144, 0.1);"></div>
                            <div>
                                <div
                                    style="font-size: 11px; font-weight: 800; color: #2b3990; text-transform: uppercase; letter-spacing: 1.5px; opacity: 0.6;">
                                    Location</div>
                                <div style="font-size: 18px; font-weight: 800; color: #061a40;">{{ car.location.location
                                    }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Security Deposit -->
            <div class="section-divider" style="border-bottom: none;">
                <h2 class="section-title">
                    <i class="fas fa-shield-alt"></i>
                    Security Deposit
                </h2>
                <p class="section-description">Choose your preferred deposit method. 100% refundable.</p>
                <div class="deposit-grid" style="grid-template-columns: repeat(2, 1fr); gap: 15px;">
                    <label class="deposit-option-card selected" style="padding: 25px; border-radius: 20px;">
                        <input type="radio" name="deposit" value="bike_rc" checked>
                        <span class="deposit-icon" style="font-size: 32px; margin-bottom: 12px;">🏍️</span>
                        <div class="deposit-name" style="font-size: 16px;">Bike &amp; RC</div>
                        <div class="deposit-desc">Physical Document</div>
                    </label>
                    <label class="deposit-option-card" style="padding: 25px; border-radius: 20px;">
                        <input type="radio" name="deposit" value="laptop">
                        <span class="deposit-icon" style="font-size: 32px; margin-bottom: 12px;">💻</span>
                        <div class="deposit-name" style="font-size: 16px;">Laptop</div>
                        <div class="deposit-desc">Device Deposit</div>
                    </label>
                    <label class="deposit-option-card" style="padding: 25px; border-radius: 20px;">
                        <input type="radio" name="deposit" value="cheque">
                        <span class="deposit-icon" style="font-size: 32px; margin-bottom: 12px;">✍️</span>
                        <div class="deposit-name" style="font-size: 16px;">Empty Cheque</div>
                        <div class="deposit-desc">Signed Blank Cheque</div>
                    </label>
                    <label class="deposit-option-card" style="padding: 25px; border-radius: 20px;">
                        <input type="radio" name="deposit" value="cash">
                        <span class="deposit-icon" style="font-size: 32px; margin-bottom: 12px;">💰</span>
                        <div class="deposit-name" style="font-size: 16px;">₹15,000 Cash</div>
                        <div class="deposit-desc">Instant Refund</div>
                    </label>
                </div>
            </div>

            <!-- Coupon Code -->
            <div class="section-divider">
                <h2 class="section-title"><i class="fas fa-tag"></i> Coupon Code</h2>
                <div class="coupon-input-group"
                    style="background: #ffffff; padding: 8px; border-radius: 16px; border: 2px solid #2b3990;">
                    <input type="text" id="couponCode" class="coupon-input" placeholder="Have a coupon?"
                        style="border: none; background: transparent;">
                    <button onclick="validateCoupon()" id="applyCouponBtn" class="coupon-apply-btn"
                        style="border-radius: 12px; background: #2b3990;">Apply</button>
                </div>
                <div id="couponMessage" class="coupon-message"></div>
                <div id="appliedCoupon" class="coupon-applied" style="margin-top: 15px; border-radius: 16px;">
                    <div class="coupon-applied-inner">
                        <div>
                            <span
                                style="background: #10b981; color: #fff; padding: 4px 10px; border-radius: 6px; font-size: 11px; font-weight: 800; margin-right: 10px;">ACTIVE</span>
                            <span id="appliedCouponCode" style="font-weight: 700; color: #065f46;"></span>
                        </div>
                        <button onclick="removeCoupon()" class="coupon-remove-btn">Remove</button>
                    </div>
                </div>
            </div>

            <!-- Phone Number Section (Required for Home Delivery) -->
            {% if home_delivery %}
            <div class="section-divider">
                <h2 class="section-title"><span class="section-icon">&#128222;</span> Contact Details</h2>
                <div class="kyc-warning"
                    style="background: rgba(43, 57, 144, 0.05); border-left: 4px solid #2b3990; color: #061a40;">
                    <div class="kyc-warning-text">
                        <strong>Required for Home Delivery:</strong> Please provide your phone number for delivery
                        coordination.
                    </div>
                </div>
                <div class="form-group" style="margin-top: 20px;">
                    <label for="phoneNumber"
                        style="display: block; margin-bottom: 8px; font-weight: 600; color: #1e293b;">Phone Number
                        *</label>
                    <input type="tel" id="phoneNumber" name="phone" class="form-control"
                        placeholder="Enter your 10-digit phone number" pattern="[0-9]{10}" maxlength="10"
                        value="{{ user.phone if user.phone else '' }}" required>
                    <small style="color: #64748b; font-size: 12px; margin-top: 5px; display: block;">
                        Used by our delivery team to contact you
                    </small>
                </div>
            </div>
            {% endif %}

            <!-- KYC Upload Section -->
            {% if not kyc_complete %}
            <div class="section-divider">
                <h2 class="section-title"><span class="section-icon">&#128214;</span> KYC Documents</h2>
                <div class="kyc-warning"
                    style="background: #f0f4ff; border: 1px solid rgba(43, 57, 144, 0.1); border-left: 5px solid #2b3990; color: #1e293b; border-radius: 12px; padding: 24px; margin-bottom: 30px;">
                    <div class="kyc-warning-text" style="display: flex; gap: 15px; align-items: flex-start;">
                        <i class="fas fa-id-card" style="font-size: 24px; margin-top: 2px; color: #2b3990;"></i>
                        <div>
                            <strong
                                style="display: block; font-size: 16px; margin-bottom: 4px; color: #061a40;">Identity
                                Verification Required</strong>
                            <p style="font-size: 14px; line-height: 1.5; color: #475569; margin: 0;">For a secure
                                booking experience, please complete your KYC by uploading the required documents below.
                            </p>
                        </div>
                    </div>
                </div>
                <div class="kyc-documents">
                    <!-- Aadhaar Front -->
                    <div class="kyc-document-item">
                        <label class="kyc-document-label">Aadhaar Front</label>
                        {% if user.aadhaar_front %}
                        <div class="kyc-preview">
                            <img src="{{ user.aadhaar_front }}" alt="Aadhaar Front" onerror="this.style.display='none'">
                            <div class="kyc-upload-status uploaded">&#10003; Uploaded</div>
                        </div>
                        {% else %}
                        <div class="kyc-upload-area">
                            <input type="file" class="kyc-upload-input" accept=".jpg,.jpeg,.png,.pdf"
                                data-doc-type="aadhaar_front" id="aadhaarFront">
                            <label for="aadhaarFront" class="kyc-upload-button">Upload</label>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Aadhaar Back -->
                    <div class="kyc-document-item">
                        <label class="kyc-document-label">Aadhaar Back</label>
                        {% if user.aadhaar_back %}
                        <div class="kyc-preview">
                            <img src="{{ user.aadhaar_back }}" alt="Aadhaar Back" onerror="this.style.display='none'">
                            <div class="kyc-upload-status uploaded">&#10003; Uploaded</div>
                        </div>
                        {% else %}
                        <div class="kyc-upload-area">
                            <input type="file" class="kyc-upload-input" accept=".jpg,.jpeg,.png,.pdf"
                                data-doc-type="aadhaar_back" id="aadhaarBack">
                            <label for="aadhaarBack" class="kyc-upload-button">Upload</label>
                        </div>
                        {% endif %}
                    </div>

                    <!-- DL Front -->
                    <div class="kyc-document-item">
                        <label class="kyc-document-label">Driving License Front</label>
                        {% if user.drivinglicense_front %}
                        <div class="kyc-preview">
                            <img src="{{ user.drivinglicense_front }}" alt="DL Front"
                                onerror="this.style.display='none'">
                            <div class="kyc-upload-status uploaded">&#10003; Uploaded</div>
                        </div>
                        {% else %}
                        <div class="kyc-upload-area">
                            <input type="file" class="kyc-upload-input" accept=".jpg,.jpeg,.png,.pdf"
                                data-doc-type="dl_front" id="dlFront">
                            <label for="dlFront" class="kyc-upload-button">Upload</label>
                        </div>
                        {% endif %}
                    </div>

                    <!-- DL Back -->
                    <div class="kyc-document-item">
                        <label class="kyc-document-label">Driving License Back</label>
                        {% if user.drivinglicense_back %}
                        <div class="kyc-preview">
                            <img src="{{ user.drivinglicense_back }}" alt="DL Back" onerror="this.style.display='none'">
                            <div class="kyc-upload-status uploaded">&#10003; Uploaded</div>
                        </div>
                        {% else %}
                        <div class="kyc-upload-area">
                            <input type="file" class="kyc-upload-input" accept=".jpg,.jpeg,.png,.pdf"
                                data-doc-type="dl_back" id="dlBack">
                            <label for="dlBack" class="kyc-upload-button">Upload</label>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endif %}

            <!-- Terms and Conditions Section -->
            <div class="terms-section">
                <div class="terms-header" onclick="toggleTerms()">
                    <h3>Terms &amp; Risk Declaration</h3>
                    <span class="terms-toggle" id="termsToggle">&#9660;</span>
                </div>
                <div class="terms-content" id="termsContent">
                    <div class="terms-body">
                        <div
                            style="text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #e2e8f0;">
                            <h1 style="font-size: 24px; font-weight: 700; color: #1a202c; margin-bottom: 10px;">GoGo
                                Cars &#8211; Terms &amp; Risk Declaration</h1>
                            <p style="font-size: 14px; color: #64748b; margin: 5px 0;">(operated by GoGo enterprises)
                            </p>
                            <p style="font-size: 12px; color: #475569; margin: 5px 0;">Phone: 8121765714 | Email:
                                gogocars5477@gmail.com | GSTIN: 36BTQPG9657M1ZO</p>
                        </div>

                        <h2>1. Eligibility &amp; Documentation</h2>
                        <p>Minimum driver age is 21 years (25 years for premium vehicles). A valid Indian Driving
                            Licence held for at least one year is mandatory. Original ID proof is required. Learner
                            licences are not accepted. Aadhar or passport is mandatory for renting a car.</p>

                        <h2>2. Rental Period</h2>
                        <p>Rental starts at pickup time and ends at return time. Late returns may attract hourly or
                            full-day charges. Extensions require prior approval.</p>

                        <h3>PENALTY FOR VEHICLE EXTENSION</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>CAR TYPE</th>
                                    <th>PRICE</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Hatchback</td>
                                    <td>Rs.80/hour</td>
                                </tr>
                                <tr>
                                    <td>Sedan &amp; MUV</td>
                                    <td>Rs.100/hour</td>
                                </tr>
                                <tr>
                                    <td>SUV</td>
                                    <td>Rs.160/hour</td>
                                </tr>
                            </tbody>
                        </table>

                        <h2>3. Authorized Use</h2>
                        <p>The rented vehicle shall be operated strictly and exclusively by the renter whose details are
                            recorded in the agreement. No sharing, delegation, or substitution is permitted under any
                            circumstances. The vehicle shall not be used for any illegal, immoral, or unlawful activity
                            like:</p>
                        <ul>
                            <li>Racing, rallies, speed testing, or off-road driving</li>
                            <li>Commercial use including taxi, delivery, or sub-rental</li>
                            <li>Driving under influence of alcohol, drugs, or intoxicants</li>
                        </ul>
                        <p>Any violation or breach of this clause shall result in immediate termination of rental,
                            forfeiture of all paid amounts and deposits, and full civil and criminal liability on the
                            renter, without prejudice to the GoGo cars right to initiate legal proceedings.</p>

                        <h2>4. Vehicle Responsibility</h2>
                        <p>Vehicle must be returned in the same condition (normal wear excepted). Smoking or tobacco use
                            inside the vehicle is prohibited.</p>
                        <p><strong>Clutch problems and clutch plates burn and car break down due to clutch plates need
                                be taken care by the renter only.</strong> Before renting a car need to check car
                            condition complete responsibility by renter only.</p>

                        <h2>5. Fuel &amp; Mileage</h2>
                        <p>Fuel level must be returned as provided. Mileage limits and excess charges apply as per
                            booking. No refund for extra fuel and no refund for fastag.</p>

                        <h2>6. Payments &amp; Deposits</h2>
                        <p>All charges must be paid in advance. Security deposit refund will be processed within
                            7&#8211;10 working days post inspection. Bike + RC or laptop or cash (minimum 10000rs for
                            small cars and it will change depends on the car model premium cars &#8211; 30000rs min).
                        </p>
                        <p>In the event that the vehicle is damaged during the rental period, the cost of repairs shall
                            be determined by GoGo Cars, and the security deposit shall be retained until all repairs
                            have been fully completed.</p>

                        <h2>7. Insurance &amp; Liability</h2>
                        <ul>
                            <li>Vehicles are covered under basic motor insurance as per Indian law.</li>
                            <li>The renter is fully responsible for:
                                <ul>
                                    <li>Insurance excess/deductible</li>
                                    <li>Damage not covered by insurance</li>
                                    <li>Damage caused by negligence or rule violations</li>
                                </ul>
                            </li>
                            <li>Insurance becomes void if:
                                <ul>
                                    <li>Vehicle is driven by an unauthorized person</li>
                                    <li>Driving under influence</li>
                                    <li>Illegal or reckless use</li>
                                </ul>
                            </li>
                        </ul>

                        <h2>8. Traffic Violations</h2>
                        <p>The renter shall be solely and absolutely responsible for all traffic violations, challans,
                            tolls, parking charges, fines, penalties, and court summons, or statutory liabilities
                            arising during the rental period irrespective of when such notices are received. The GoGo
                            cars is authorized to recover such amounts from the security deposit or directly from the
                            renter and impose administrative and processing charges and also share renter details with
                            authorities without prior notice. In case of failure to settle such liabilities shall
                            constitute material breach of this agreement and may result in legal recovery proceedings.
                        </p>

                        <h2>9. Downtime / Loss of Use Charges</h2>
                        <p>If the vehicle is damaged, seized, or unavailable due to renter's fault, a minimum downtime
                            charge of 1,000 per day shall apply until the vehicle is roadworthy, in addition to repair
                            and other costs. Premium cars 2000rs per day.</p>

                        <h2>10. Governing Law &amp; Jurisdiction</h2>
                        <p>This agreement shall be governed by and construed exclusively in accordance with the laws of
                            India. Subject to arbitration clause herein, all courts, tribunals, and authorities other
                            than those situated within Andhra Pradesh are expressly excluded and exclusive jurisdiction
                            shall vest only within the jurisdiction of the Courts which are situated in GoGo Cars. The
                            renter irrevocably waives any objection to jurisdiction, forum non conveniens or territorial
                            competence.</p>

                        <h2>11. Cancellation Policy</h2>
                        <ul>
                            <li>Cancellation 48 hours before pickup: partial or full refund (as per booking policy).
                            </li>
                            <li>Late cancellations or no-shows may result in forfeiture of booking amount.</li>
                            <li>If the id proofs submitted by the renter at the time of pick up is not satisfactory or
                                if the renter forgets to bring the ids mentioned in the terms during pick up, the
                                booking will be considered as last minute cancellation and no refund of the advance paid
                                will be given.</li>
                            <li>If the renter is found to be drunk or under any kind of intoxication at the time of pick
                                up, the booking will automatically be cancelled and no refund will be provided.</li>
                            <li>Any changes in the date of booking should be informed to us at least 48 hours before the
                                trip timing otherwise a 20% charge would be applied for changing the booking.</li>
                            <li>In case the renter needs to cancel the booking, the same has to be informed 48 hours
                                before the time of pickup and the booking will be cancelled with a charge of 30%. In
                                case of the cancellation being done within 48 hours prior to the time of pickup no
                                refund will be given.</li>
                            <li>If the renter needs to cancel or modify the booking within 24 hours from the time of
                                pickup no changes can be done to the same and no refund will be processed.</li>
                        </ul>

                        <h2>12. Termination of Rental</h2>
                        <p>GoGo Cars reserves the right to terminate the rental without refund if:</p>
                        <ul>
                            <li>Terms are violated</li>
                            <li>False information is provided</li>
                            <li>Vehicle is misused or abused</li>
                        </ul>

                        <h2>13. Personal Belongings</h2>
                        <p>GoGo Cars is not responsible for loss or damage to personal items left in the vehicle.</p>

                        <h2>14. Absolute Ownership &amp; Prohibition of Illegal Mortgage</h2>
                        <p>The vehicle shall remain at all times the absolute, exclusive and undisputed property of GoGo
                            Cars. The renter holds the vehicle purely in trust and custody without acquiring any right,
                            title interest or claim of any nature. Any act or attempt of sale, pledge, mortgage,
                            creation of third party rights shall constitute criminal breach of trust and cheating,
                            punishable under Section 406 and 420 of IPC in addition to other applicable laws. GoGo Cars
                            reserves the right to initiate immediate criminal prosecution and civil recovery
                            proceedings.</p>

                        <h2>15. Zero Tolerance for Illegal Use</h2>
                        <p>Use of the vehicle for any illegal, immoral, or unlawful purpose including smuggling,
                            transportation of contraband, criminal activities, or absconding shall result in immediate
                            termination and legal action. All losses, penalties, and legal consequences shall be borne
                            solely by the renter.</p>

                        <h2>16. Damage, Abuse &amp; Negligence Policy</h2>
                        <p>The renter is fully responsible for all damages including mechanical, electrical, body, tyre,
                            wheel, interior, and cosmetic damages irrespective of fault. Damage assessment by GoGo Cars
                            shall be final and binding. Insurance does not cover damages caused due to rash driving,
                            negligence, water logging, clutch abuse, or misuse.</p>

                        <h2>17. Cheque Bounce &amp; Financial Recovery Clause</h2>
                        <p>In case any cheque issued by the renter towards rental charges, damages, downtime, or
                            recovery costs is dishonoured, the renter shall be liable for prosecution under Section 138
                            of the Negotiable Instruments Act, 1881. All legal costs, interest, and recovery expenses
                            shall be borne by the renter, without prejudice to GoGo Cars' right to recover dues by other
                            legal means.</p>

                        <h2>18. Accident, Injury &amp; Death &#8211; Complete Indemnity</h2>
                        <p>The renter acknowledges that the vehicle is operated entirely at the renters own risk. GoGo
                            Cars, its proprietor, employees, agents or representatives shall bear no liability
                            whatsoever for accidents, injury, disability, death or third party claims. The renter agrees
                            to fully indemnify and hold harmless GoGo cars from all claims, compensation, damages, costs
                            and legal proceedings whether civil, criminal or statutory including third party and
                            governmental claims.</p>

                        <h2>19. Seizure, Police Case &amp; Legal Costs</h2>
                        <p>If the vehicle is seized, impounded, detained or involved in any police, criminal, regulatory
                            or court proceedings due to the renter acts or omissions, the renter shall be solely
                            responsible for legal representation and advocate fees, Court costs, penalties, fines and
                            settlements, loss of business, downtime and reputational damage. The renter shall reimburse
                            GoGo cars on demand, and failure to do so shall entitle GoGo cars to initiate recovery and
                            prosecution proceedings.</p>

                        <h2>20. Arbitration Clause (Fast Recovery)</h2>
                        <p>All disputes, claims, or differences arising out of or relating to this agreement shall be
                            referred to sole arbitration under the Arbitration and Conciliation Act, 1996. The
                            arbitrator shall be appointed exclusively by GoGo cars. The seat and Venue of arbitration
                            shall be Mangalagiri or Guntur. The arbitral award shall be final, binding, enforceable, and
                            non appealable except as permitted under law.</p>

                        <h2>21. Jurisdiction</h2>
                        <p>Subject to the arbitration clause, all legal proceedings shall lie exclusively within the
                            jurisdiction of the Andhra Pradesh High Court, Amaravati only. The renter expressly waives
                            any right to initiate proceedings in any other court or forum and agrees that such action
                            shall be void and unenforceable.</p>
                        <p><strong>Or</strong></p>
                        <p>All legal proceedings shall lie exclusively within the jurisdiction of the corporate office
                            location. The renter expressly waives any right to initiate proceedings in any other court
                            or forum and agrees that such action shall be void and unenforceable.</p>

                        <div
                            style="margin-top: 30px; padding: 20px; background: #f0f9ff; border-left: 4px solid #2b3990; border-radius: 8px;">
                            <h2 style="color: #1a202c; margin-top: 0;">Risk &amp; Liability Declaration</h2>
                            <p>I, the undersigned renter, acknowledge that I am renting and operating the vehicle
                                from
                                GoGo
                                Cars entirely at my own risk.</p>
                            <p>I agree that in case of any accident, injury, disability, or death involving the
                                rented
                                vehicle, GoGo Cars, its owner, employees, or staff shall not be held responsible
                                under
                                any
                                circumstances.</p>
                            <p>I accept full civil, criminal, and legal liability for all consequences arising from
                                use
                                of
                                the vehicle.</p>
                            <p>I further agree to pay downtime / loss-of-use charges of minimum 1,000 per day if the
                                vehicle
                                becomes unusable due to accident, negligence, seizure, or misuse during my rental
                                period.
                            </p>
                            <p>I confirm that I possess a valid driving licence, am medically fit to drive, and will
                                comply
                                with all traffic laws.</p>
                            <p><strong>I have read and accepted this agreement voluntarily and without
                                    coercion.</strong>
                            </p>
                        </div>

                        <div
                            style="margin-top: 30px; padding: 15px; background: #f7fafc; border-radius: 8px; font-size: 12px; color: #475569;">
                            <h3 style="color: #1a202c; margin-top: 0;">Corporate Office Locations:</h3>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 10px;">
                                <div>
                                    <p><strong>Parking - 1</strong></p>
                                    <p>Flot No -406, Block No-1<br>
                                        Srinivasam Apartments,<br>
                                        KLU Road, Kunchanapalli,<br>
                                        Tadepalli, Guntur, A. P -522501</p>
                                    <p>+91 8121765714</p>
                                </div>
                                <div>
                                    <p><strong>Parking - 2</strong></p>
                                    <p>Road No â€“ 8, plot no 146,<br>
                                        Ayyappa Society, Madhapur,<br>
                                        Hyderabad, Telangana - 500081</p>
                                    <p>+91 9052775477</p>
                                </div>
                                <div>
                                    <p><strong>Corporate office</strong></p>
                                    <p>5 – 307/3, Opp Power sub station<br>
                                        Rtc, colony, Chilakalurupet,<br>
                                        Guntur, Andrapradesh - 522616</p>
                                    <p>+91 9133135477</p>
                                </div>
                            </div>
                            <p style="margin-top: 15px; text-align: center;">
                                <strong>GST â€“ 36BTQPG9657M1ZO</strong><br>
                                gogocars5477@gmail.com | +91 8121765714 | www.gogocar.in
                            </p>
                        </div>
                    </div>
                </div>
                <div class="terms-checkbox-container">
                    <input type="checkbox" id="termsAcceptCheckbox" required>
                    <label for="termsAcceptCheckbox">
                        I have read, understood, and agree to the Terms &amp; Risk Declaration stated above. I
                        acknowledge that I am renting the vehicle entirely at my own risk.
                    </label>
                </div>
            </div>
        </div><!-- End payment-left -->

        <div class="payment-right">
            <div class="fare-card">
                <div class="fare-card-title">
                    <i class="fas fa-file-invoice-dollar" style="color: #2b3990;"></i> Fare Summary
                </div>
                <ul class="pricing-items">
                    <li class="pricing-item">
                        <span class="pricing-item-name">Base Rental</span>
                        <span class="pricing-item-amount" id="carPriceAmount">
                            {% if pricing_breakdown %}₹{{ "{:,.0f}".format(pricing_breakdown.base_rental) }}{%
                            else %}₹0{% endif %}
                        </span>
                    </li>
                    <!-- Damage Protection Removed -->
                    <li class="pricing-item" id="gstItem">
                        <span class="pricing-item-name">GST (18%)</span>
                        <span class="pricing-item-amount" id="gstAmount">
                            {% if pricing_breakdown %}₹{{ "{:,.2f}".format(pricing_breakdown.gst) }}{%
                            else %}₹0{% endif %}
                        </span>
                    </li>
                    <li class="pricing-item" id="discountItem" style="display: none;">
                        <span class="pricing-item-name" style="color: #10b981;">Discount Applied</span>
                        <span class="pricing-item-amount" id="discountAmount" style="color: #10b981;">-₹0.00</span>
                    </li>
                </ul>
                <div class="pricing-total"
                    style="display: flex; flex-direction: column; align-items: flex-end; gap: 4px; margin-top: 25px; padding-top: 25px; border-top: 2px dashed #edf2f7;">
                    <span class="pricing-total-label"
                        style="font-size: 13px; letter-spacing: 1.5px; color: #64748b; font-weight: 800;">TOTAL TO
                        PAY</span>
                    <span class="pricing-total-amount" id="totalAmount"
                        style="font-size: 48px; line-height: 1; color: #2b3990; font-weight: 950; letter-spacing: -2px;">
                        {% if pricing_breakdown %}₹{{ "{:,.2f}".format(pricing_breakdown.total) }}{% else
                        %}₹0.00{% endif %}
                    </span>
                </div>

                <div style="margin-top: 25px;">
                    <button class="pay-button" id="payButton" {% if not kyc_complete %}disabled{% endif %}>
                        {% if kyc_complete %}Pay ₹{{ "{:,.2f}".format(pricing_breakdown.total) if pricing_breakdown else
                        '0.00' }}{% else %}Complete KYC to Pay{% endif %}
                    </button>
                    <div
                        style="font-size: 12px; color: #94a3b8; text-align: center; margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                        <i class="fas fa-lock" style="color: #10b981; font-size: 10px;"></i> Secure 256-bit SSL
                        Encrypted Payment
                    </div>
                </div>
            </div><!-- End payment-right -->
        </div><!-- End payment-layout -->



        <script>
            // Car data from server (only for display, not for calculations)
            const bodyData = document.body.dataset;
            const carId = bodyData.carId;
            const hours = parseInt(bodyData.hours);
            const kycComplete = bodyData.kycComplete === 'true';
            const missingDocuments = JSON.parse(bodyData.missingDocs);

            // Current pricing data (will be fetched from backend)
            let currentPricing = null;
            let appliedCoupon = null;
            const pmUrlParams = new URLSearchParams(window.location.search);
            let selectedDamageProtection = 0; // Removed as per user request
            let selectedDeposit = pmUrlParams.get('deposit_type') || 'bike_rc';

            // Damage protection buttons - REMOVED

            // Deposit option selection
            const depositOptions = document.querySelectorAll('input[name="deposit"]');
            const depositCards = document.querySelectorAll('.deposit-option-card');

            depositCards.forEach((card, index) => {
                card.addEventListener('click', function () {
                    // Trigger the radio button
                    if (depositOptions[index]) {
                        depositOptions[index].checked = true;
                        depositOptions[index].dispatchEvent(new Event('change'));
                    }
                });
            });

            depositOptions.forEach((option, index) => {
                option.addEventListener('change', function () {
                    selectedDeposit = this.value;
                    // Update card styling
                    depositCards.forEach(card => card.classList.remove('selected'));
                    if (depositCards[index]) {
                        depositCards[index].classList.add('selected');
                    }
                });
            });

            // Set default selected deposit card
            let foundDepositBtn = false;
            depositOptions.forEach((opt, index) => {
                if (opt.value === selectedDeposit) {
                    opt.checked = true;
                    document.querySelectorAll('.deposit-option-card').forEach(c => c.classList.remove('selected'));
                    if (depositCards[index]) depositCards[index].classList.add('selected');
                    foundDepositBtn = true;
                }
            });
            if (!foundDepositBtn && depositCards.length > 0 && depositOptions[0]) {
                depositOptions[0].checked = true;
                depositCards[0].classList.add('selected');
            }

            // Initial pricing load
            async function loadInitialPricing() {
                await updatePricing();
            }

            // Load pricing on page load
            loadInitialPricing();

            // Coupon management functions
            async function validateCoupon() {
                const couponCode = document.getElementById('couponCode').value.trim().toUpperCase();
                const messageDiv = document.getElementById('couponMessage');
                const applyBtn = document.getElementById('applyCouponBtn');

                if (!couponCode) {
                    messageDiv.style.display = 'block';
                    messageDiv.style.color = '#dc2626';
                    messageDiv.textContent = 'Please enter a coupon code';
                    return;
                }

                applyBtn.disabled = true;
                applyBtn.textContent = 'Validating...';
                messageDiv.style.display = 'none';

                // Recalculate pricing with coupon - backend will validate
                await updatePricing(couponCode);
            }

            function removeCoupon() {
                appliedCoupon = null;
                document.getElementById('appliedCoupon').style.display = 'none';
                document.getElementById('couponCode').value = '';
                document.getElementById('couponMessage').style.display = 'none';
                updatePricing();
            }

            // Update pricing by calling backend API
            async function updatePricing(couponCode = null) {
                try {
                    // Build request body
                    const requestBody = {
                        car_id: carId,
                        hours: hours,
                        damage_protection: selectedDamageProtection
                    };

                    if (couponCode) {
                        requestBody.coupon_code = couponCode;
                    } else if (appliedCoupon) {
                        requestBody.coupon_code = appliedCoupon.coupon_code;
                    }

                    const response = await fetch('/payments/calculate-price', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        credentials: 'include',
                        body: JSON.stringify(requestBody)
                    });

                    if (!response.ok) {
                        throw new Error('Failed to calculate price');
                    }

                    const result = await response.json();

                    if (!result.success) {
                        throw new Error(result.detail || 'Failed to calculate price');
                    }

                    currentPricing = result.pricing;

                    // Update applied coupon if coupon was used
                    if (result.coupon_applied && result.coupon_id) {
                        appliedCoupon = {
                            coupon_id: result.coupon_id,
                            coupon_code: couponCode || (appliedCoupon ? appliedCoupon.coupon_code : ''),
                            discount_amount: result.pricing.discount
                        };

                        document.getElementById('appliedCouponCode').textContent = appliedCoupon.coupon_code;
                        document.getElementById('appliedCouponDiscount').textContent = `-₹${result.pricing.discount.toLocaleString('en-IN')}`;
                        document.getElementById('appliedCoupon').style.display = 'block';
                        document.getElementById('couponCode').value = '';
                        document.getElementById('couponMessage').style.display = 'none';
                    } else if (couponCode) {
                        // Coupon validation failed
                        const messageDiv = document.getElementById('couponMessage');
                        messageDiv.style.display = 'block';
                        messageDiv.style.color = '#dc2626';
                        messageDiv.textContent = 'Invalid coupon code';
                    }

                    // Update display with backend-calculated values
                    document.getElementById('carPriceAmount').textContent = `₹${currentPricing.base_rental.toLocaleString('en-IN')}`;

                    // Update damage protection amount
                    const damageProtectionAmount = document.getElementById('damageProtectionAmount');
                    if (damageProtectionAmount) {
                        damageProtectionAmount.textContent = `₹${selectedDamageProtection.toLocaleString('en-IN')}`;
                    }

                    // Update GST amount
                    const gstAmount = document.getElementById('gstAmount');
                    if (gstAmount) {
                        gstAmount.textContent = `₹${currentPricing.gst.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                    }

                    // Show/hide discount item
                    const discountItem = document.getElementById('discountItem');
                    const discountAmount = document.getElementById('discountAmount');
                    if (currentPricing.discount > 0) {
                        discountItem.style.display = 'flex';
                        discountAmount.textContent = `-₹${currentPricing.discount.toLocaleString('en-IN')}`;
                    } else {
                        discountItem.style.display = 'none';
                    }

                    const totalAmountElem = document.getElementById('totalAmount');
                    if (totalAmountElem) {
                        totalAmountElem.textContent = `₹${currentPricing.total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                    }

                    // Update Pay Button Text
                    const payButton = document.getElementById('payButton');
                    if (payButton && kycComplete) {
                        payButton.textContent = `PAY ₹${currentPricing.total.toLocaleString('en-IN', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
                    }

                    // Re-enable apply button
                    const applyBtn = document.getElementById('applyCouponBtn');
                    if (applyBtn) {
                        applyBtn.disabled = false;
                        applyBtn.textContent = 'Apply';
                    }

                } catch (error) {
                    console.error('Error updating pricing:', error);
                    const applyBtn = document.getElementById('applyCouponBtn');
                    if (applyBtn) {
                        applyBtn.disabled = false;
                        applyBtn.textContent = 'Apply';
                    }
                }
            }

            // KYC Upload handlers
            document.querySelectorAll('.kyc-upload-input').forEach(input => {
                input.addEventListener('change', async function (e) {
                    const file = e.target.files[0];
                    if (!file) return;

                    const docType = this.getAttribute('data-doc-type');
                    const formData = new FormData();
                    formData.append('file', file);
                    formData.append('document_type', docType);

                    const button = this.nextElementSibling;
                    const originalText = button.textContent;
                    button.textContent = 'Uploading...';
                    button.disabled = true;

                    try {
                        const response = await fetch('/auth/kyc/upload', {
                            method: 'POST',
                            body: formData,
                            credentials: 'include'
                        });

                        const result = await response.json();

                        if (result.success) {
                            location.reload();
                        } else {
                            alert('Upload failed: ' + (result.error || result.detail || 'Unknown error'));
                            button.textContent = originalText;
                            button.disabled = false;
                        }
                    } catch (error) {
                        console.error('Upload error:', error);
                        alert('Upload failed. Please try again.');
                        button.textContent = originalText;
                        button.disabled = false;
                    }
                });
            });

            // Terms toggle function
            function toggleTerms() {
                const content = document.getElementById('termsContent');
                const toggle = document.getElementById('termsToggle');
                content.classList.toggle('expanded');
                toggle.classList.toggle('expanded');
            }

            // Update pay button state
            function updatePayButtonState() {
                const payButton = document.getElementById('payButton');
                const termsCheckbox = document.getElementById('termsAcceptCheckbox');
                if (payButton && termsCheckbox) {
                    if (!kycComplete) {
                        payButton.disabled = true;
                    } else if (!termsCheckbox.checked) {
                        payButton.disabled = true;
                    } else {
                        payButton.disabled = false;
                    }
                }
            }

            document.getElementById('termsAcceptCheckbox')?.addEventListener('change', updatePayButtonState);

            // Pay button handler
            document.getElementById('payButton')?.addEventListener('click', async function () {
                if (!kycComplete) {
                    alert('Please upload all KYC documents first.');
                    return;
                }

                const termsCheckbox = document.getElementById('termsAcceptCheckbox');
                if (!termsCheckbox || !termsCheckbox.checked) {
                    alert('Please read and accept the Terms & Risk Declaration.');
                    const content = document.getElementById('termsContent');
                    if (!content.classList.contains('expanded')) toggleTerms();
                    document.querySelector('.terms-section').scrollIntoView({ behavior: 'smooth', block: 'center' });
                    return;
                }

                const homeDelivery = ("{{ 'true' if home_delivery else 'false' }}" === "true");
                if (homeDelivery) {
                    const phoneInput = document.getElementById('phoneNumber');
                    if (phoneInput) {
                        const phoneNumber = phoneInput.value.trim();
                        if (!phoneNumber || phoneNumber.length !== 10 || !/^[0-9]{10}$/.test(phoneNumber)) {
                            alert('Please enter a valid 10-digit phone number.');
                            phoneInput.focus();
                            return;
                        }

                        const currentPhone = '{{ user.phone if user.phone else "" }}';
                        if (phoneNumber !== currentPhone) {
                            try {
                                const updateResponse = await fetch('/auth/update-phone', {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify({ phone: phoneNumber })
                                });
                                if (!updateResponse.ok) throw new Error('Failed to update phone');
                            } catch (error) {
                                alert('Error updating phone number. Please try again.');
                                return;
                            }
                        }
                    }
                }

                const button = this;
                const originalText = button.innerHTML;
                button.disabled = true;
                button.innerHTML = 'Processing...';

                try {
                    if (!currentPricing) await updatePricing();

                    const formData = new FormData();
                    formData.append('car_id', carId);
                    formData.append('pickup_datetime', '{{ pickup_datetime }}');
                    formData.append('end_datetime', '{{ end_datetime }}');
                    formData.append('hours', hours);
                    formData.append('damage_protection', selectedDamageProtection);
                    formData.append('deposit_type', selectedDeposit);
                    formData.append('base_rental', currentPricing.base_rental);
                    formData.append('discount', currentPricing.discount || 0);
                    if (appliedCoupon) formData.append('coupon_id', appliedCoupon.coupon_id);
                    formData.append('total', currentPricing.total);
                    formData.append('home_delivery', String(homeDelivery));

                    const deliveryAddress = sessionStorage.getItem('delivery_address') || '{{ delivery_address if delivery_address else "" }}';
                    if (deliveryAddress) formData.append('delivery_address', deliveryAddress);

                    const response = await fetch('/payments/create-temp-order', {
                        method: 'POST',
                        body: formData,
                        credentials: 'include'
                    });

                    const result = await response.json();

                    if (result.success && result.temp_order_id) {
                        let paymentUrl = `/payments/create?order_id=${result.temp_order_id}`;
                        paymentUrl += `&damage_protection=${selectedDamageProtection}`;
                        paymentUrl += `&deposit_type=${encodeURIComponent(selectedDeposit)}`;
                        if (homeDelivery) paymentUrl += `&home_delivery=true`;
                        window.location.href = paymentUrl;
                    } else {
                        throw new Error(result.detail || 'Failed to create order');
                    }
                } catch (error) {
                    alert('Payment failed: ' + error.message);
                    button.disabled = false;
                    button.innerHTML = originalText;
                }
            });
            // Init
            updatePricing();
            updatePayButtonState();
        </script>
        {% include '_header_js.html' %}
</body>

</html>